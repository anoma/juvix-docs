
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Official Documentation for Juvix">
      
      
        <meta name="author" content="The Juvix Team">
      
      
        <link rel="canonical" href="https://docs.juvix.org/latest/notes/runtime-benchmark-results/">
      
      
        <link rel="prev" href="../lsp/">
      
      
      
        
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/images/favicon/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6+insiders-4.32.5">
    
    
      
        <title>Benchmarks of the new Juvix runtime - Juvix Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.dc5b59cc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.6932e648.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/extra.css">
    
      <link rel="stylesheet" href="../../assets/css/juvix-highlight.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs-juvix/dist/juvix.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Benchmarks of the new Juvix runtime - Juvix Docs" >
      
        <meta  property="og:description"  content="The Official Documentation for Juvix" >
      
        <meta  property="og:image"  content="https://docs.juvix.org/latest/assets/images/social/notes/runtime-benchmark-results.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://docs.juvix.org/latest/notes/runtime-benchmark-results/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Benchmarks of the new Juvix runtime - Juvix Docs" >
      
        <meta  name="twitter:description"  content="The Official Documentation for Juvix" >
      
        <meta  name="twitter:image"  content="https://docs.juvix.org/latest/assets/images/social/notes/runtime-benchmark-results.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#benchmarks-of-the-new-juvix-runtime" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://docs.juvix.org" title="Juvix Docs" class="md-header__button md-logo" aria-label="Juvix Docs" data-md-component="logo">
      
  <img src="../../assets/logo-juvix.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Juvix Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Benchmarks of the new Juvix runtime
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/anoma/juvix" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    anoma/juvix
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Juvix

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/learn/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../howto/installing/" class="md-tabs__link">
          
  
  How-to guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../explanations/totality/termination/" class="md-tabs__link">
          
  
  Explanations

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/language/functions/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item">
        <a href="../lsp/" class="md-tabs__link md-tabs__link--active">
          
  
  Misc

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://docs.juvix.org" title="Juvix Docs" class="md-nav__button md-logo" aria-label="Juvix Docs" data-md-component="logo">
      
  <img src="../../assets/logo-juvix.svg" alt="logo">

    </a>
    Juvix Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/anoma/juvix" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    anoma/juvix
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Juvix
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Juvix
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Juvix Blog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    2022
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/implementation-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    implementation-notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Learn Juvix in minutes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Structuring Juvix projects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Juvix VSCode extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/emacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Juvix Emacs mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/nodejs-interop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    NodeJS Interop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    How-to guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-to guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/installing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installing Juvix
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/compilation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Compiling Juvix programs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/judoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Judoc documentation tool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Explanations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Explanations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_1" >
        
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Totality checking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Totality checking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../explanations/totality/termination/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Termination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Language reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Language reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/builtins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Builtins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/datatypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Data types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/let/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Local definitions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Control structures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/comments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Comments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/language/axioms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Axioms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Standard library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example programs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/benchmarks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_5" >
        
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tooling
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tooling/CLI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Command line interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tooling/doctor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Doctor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tooling/emacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Emacs mode
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tooling/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Haskell test suite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/judoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Judoc reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Misc
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Misc
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../lsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    LSP support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Benchmarks of the new Juvix runtime
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Benchmarks of the new Juvix runtime
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmark-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benchmark programs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmark-programs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benchmark programs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




              
              <article class="md-content__inner md-typeset">
                



                  
  



  
    <a href="https://github.com/anoma/juvix/edit/main/docs/notes/runtime-benchmark-results.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/anoma/juvix/raw/main/docs/notes/runtime-benchmark-results.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


<h1 id="benchmarks-of-the-new-juvix-runtime">Benchmarks of the new Juvix runtime<a class="headerlink" href="#benchmarks-of-the-new-juvix-runtime" title="Permanent link">&para;</a></h1>
<p>Benchmarked version: commit 148ececb4d4259eacbb980f5992073a3ac611d82
from 31.10.2022</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>We benchmark several programs manually compiled into the primitives of
the new Juvix runtime. The code corresponds closely to the code that
will be generated by the new compilation process, with basic low-level
optimisations (unboxing, untagging, etc.) but without any high-level
optimisations on JuvixCore (inlining, specialisation, constant folding,
fusion, etc.). This corresponds to the compilation process planned for
the 0.4 milestone.</p>
<p>We compare the running time and memory usage with analogous programs
written in Haskell, OCaml, JuvixCore (using the evaluator), current
Juvix (with the "direct" transpilation to C) and C.</p>
<p>The results suggest that for most first-order programs the new
compilation process will produce code with running time comparable to
the code produced by the native OCaml compiler. For higher-order
programs heavy on closure manipulation, the results are acceptable but
noticeably worse, especially with third-order functions (i.e. functions
which take functions taking functions). This could, however, be
alleviated by implementing the specialisation optimisation (see the
"specialised" column in the `ackermann` and `mapfun` benchmarks).
Besides, functional programs of order higher than two are rare.</p>
<p>The comparisons with OCaml and Haskell were not entirely fair because
the new Juvix runtime does not perform garbage collection. The overhead
of garbage collection is particularly visible on the `mergesort`
benchmark which creates many intermediate data structures that are
quickly discarded. With proper memory management, the running time
results on first-order programs for the new Juvix runtime are expected
to become slightly worse than for the native OCaml compiler.</p>
<p>For simple programs operating on integers which don't require any heap
memory allocation (`fibonacci` and `combinations` benchmarks), the
direct transpilation to C in the current Juvix seems to perform best
(behind only C). The reason is that for very simple programs `clang`
can better optimise the output of such a direct transpiler. The main
problem with the transpilation to C approach is that it cannot scale to
reliably work for more complex programs, as evidenced by the segfaults,
longer running time and higher memory use on other benchmarks.</p>
<p>In addition to the `fibonacci` and `combinations` benchmarks, the
advantage of direct transpilation for very simple programs is also
visible on the `fold` benchmark where a simple loop over a list
dominates the running time. However, this is partly because the
compilation of closures in current Juvix is incorrect allowing it to be
more efficient.</p>
<h2 id="benchmark-programs">Benchmark programs<a class="headerlink" href="#benchmark-programs" title="Permanent link">&para;</a></h2>
<h1 id="fibonacci-compute-the-nth-fibonacci-number-modulo-228-n-100000000">fibonacci: compute the Nth Fibonacci number modulo 2<sup>28</sup> (N = 100’000’000)<a class="headerlink" href="#fibonacci-compute-the-nth-fibonacci-number-modulo-228-n-100000000" title="Permanent link">&para;</a></h1>
<p>The Nth Fibonacci number is computed in O(N). Needs only constant stack
space and no heap memory. This benchmark tests the efficiency of tail
recursion and arithmetic operations.</p>
<h1 id="combinations-count-combinations-of-numbers-1-to-n-having-sum-n-n-100">combinations: count combinations of numbers 1 to N having sum N (N = 100)<a class="headerlink" href="#combinations-count-combinations-of-numbers-1-to-n-having-sum-n-n-100" title="Permanent link">&para;</a></h1>
<p>This benchmark tests the efficiency of general recursion. No heap memory
needs to be allocated. Uses stack space proportional to N. The running
time is exponential in N.</p>
<h1 id="prime-compute-the-nth-prime-n-16384">prime: compute the Nth prime (N = 16384)<a class="headerlink" href="#prime-compute-the-nth-prime-n-16384" title="Permanent link">&para;</a></h1>
<p>The Nth prime number is computed via the Eratosthenes sieve. A list of N
primes is created. No intermediate lists are discarded (garbage
collection not needed). This benchmark tests the efficiency of tail
recursion, arithmetic operations, list cell allocation and access.</p>
<h1 id="mergesort-merge-sort-a-list-of-n-integers-n-2000000">mergesort: merge sort a list of N integers (N = 2’000’000)<a class="headerlink" href="#mergesort-merge-sort-a-list-of-n-integers-n-2000000" title="Permanent link">&para;</a></h1>
<p>At each level of merge sort intermediate lists are created and
discarded. The running time for this benchmark largely depends on the
efficiency of memory management. Here one may observe the overhead of
garbage collection or the memory blow-up if no garbage collection is
used.</p>
<h1 id="maybe-optionally-sum-n-integers-from-a-binary-tree-k-times-n-220-k-100">maybe: optionally sum N integers from a binary tree K times (N = 2<sup>20</sup>, K = 100)<a class="headerlink" href="#maybe-optionally-sum-n-integers-from-a-binary-tree-k-times-n-220-k-100" title="Permanent link">&para;</a></h1>
<p>If a fixed number k is encountered in the tree then the result is
`Nothing`, otherwise it is `Just sum`. The computation is repeated
for values of k from 0 to K. This tests the efficiency of handling
optional values and data structure access.</p>
<h1 id="fold-fold-a-list-of-n-integers-k-times-n-100000-k-1000">fold: fold a list of N integers K times (N = 100’000, K = 1000)<a class="headerlink" href="#fold-fold-a-list-of-n-integers-k-times-n-100000-k-1000" title="Permanent link">&para;</a></h1>
<p>The sum of N natural numbers is computed via fold<sub>left</sub>
(tail-recursive). The computation is repeated K times. The list is
created only once, so that allocation time does not dominate. This
benchmark tests the efficiency of closure call and list cell access.</p>
<h1 id="cps-compute-the-nth-fibonacci-number-modulo-228-with-cps-n-100000000">cps: compute the Nth Fibonacci number modulo 2<sup>28</sup> with CPS (N = 100’000’000)<a class="headerlink" href="#cps-compute-the-nth-fibonacci-number-modulo-228-with-cps-n-100000000" title="Permanent link">&para;</a></h1>
<p>The function computing the Nth Fibonacci number is written in
continuation-passing style, tail-recursively calling a continuation
supplied as an argument. This benchmark tests the efficiency of closure
call and allocation.</p>
<h1 id="mapfold-map-and-fold-a-list-of-n-integers-k-times-n-10000-k-10000">mapfold: map and fold a list of N integers K times (N = 10000, K = 10000)<a class="headerlink" href="#mapfold-map-and-fold-a-list-of-n-integers-k-times-n-10000-k-10000" title="Permanent link">&para;</a></h1>
<p>This benchmark tests the efficiency of standard higher-order functions
on lists, closure call and memory management. The program allocates O(K)
intermediate lists of length N which are quickly discarded.</p>
<h1 id="ackermann-compute-ack3-n-with-the-higher-order-ackermann-function-definition-n-11">ackermann: compute Ack(3, N) with the higher-order Ackermann function definition (N = 11)<a class="headerlink" href="#ackermann-compute-ack3-n-with-the-higher-order-ackermann-function-definition-n-11" title="Permanent link">&para;</a></h1>
<p>The higher-order Ackermann function definition iterates an iteration of
function compositions. Hence, it uses a third-order invocation of an
iteration function. This benchmark tests the efficiency of creating and
calling second-order closures, and of partial application.</p>
<h1 id="mapfun-successively-map-k-functions-to-a-list-of-n-integers-k-100-n-10000">mapfun: successively map K functions to a list of N integers (K = 100, N = 10000)<a class="headerlink" href="#mapfun-successively-map-k-functions-to-a-list-of-n-integers-k-100-n-10000" title="Permanent link">&para;</a></h1>
<p>The benchmark stores K second-order closures in a list, maps them
successively to a list of K closures, and then successively maps the K
closures from the result to a list of N integers. This benchmark tests
the efficiency of manipulating closures and storing them in data
structures.</p>
<p>The benchmark programs can be found in `tests/benchmark` in the Juvix
source directory.</p>
<h2 id="methodology">Methodology<a class="headerlink" href="#methodology" title="Permanent link">&para;</a></h2>
<p>For each program the total running time (elapsed real time) and memory
use (maximum resident set size) were measured on an M1 iMac with no
significant background activity. Averages of several runs were taken.
The variance was negligible, unless indicated otherwise by providing a
range.</p>
<h2 id="results">Results<a class="headerlink" href="#results" title="Permanent link">&para;</a></h2>
<h1 id="fibonacci-compute-the-nth-fibonacci-number-modulo-228-n-100000000_1">fibonacci: compute the Nth Fibonacci number modulo 2<sup>28</sup> (N = 100’000’000)<a class="headerlink" href="#fibonacci-compute-the-nth-fibonacci-number-modulo-228-n-100000000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.26</td>
<td>0.35</td>
<td>0.35</td>
<td>0.23</td>
<td>13.15</td>
<td>10.03</td>
<td>0.39</td>
<td>0.35</td>
<td>0.94</td>
<td>0.16</td>
<td>0.22</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1.5</td>
<td>3.8</td>
<td>1.3</td>
<td>8.8</td>
<td>21.3</td>
<td>8067.7</td>
<td>9.7</td>
<td>1.7</td>
<td>1.8</td>
<td>1.3</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<h1 id="combinations-count-all-combinations-of-numbers-1-to-n-having-sum-n-n-1000">combinations: count all combinations of numbers 1 to N having sum N (N = 1000)<a class="headerlink" href="#combinations-count-all-combinations-of-numbers-1-to-n-having-sum-n-n-1000" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>6.67</td>
<td>11.25</td>
<td>3.22</td>
<td>5.1</td>
<td>441.71</td>
<td>5.48</td>
<td>5.48</td>
<td>6.53</td>
<td>41.08</td>
<td>2.69</td>
<td>4.80</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1.5</td>
<td>3.9</td>
<td>1.3</td>
<td>8.9</td>
<td>22.3</td>
<td>9.6</td>
<td>9.6</td>
<td>1.7</td>
<td>1.9</td>
<td>1.3</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<h1 id="prime-compute-the-nth-prime-n-16384_1">prime: compute the Nth prime (N = 16384)<a class="headerlink" href="#prime-compute-the-nth-prime-n-16384_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>1.52</td>
<td>1.91</td>
<td>segfault</td>
<td>3.09</td>
<td>167.04</td>
<td>3.85</td>
<td>3.85</td>
<td>1.68</td>
<td>14.82</td>
<td>0.12</td>
<td>0.13</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1.7</td>
<td>4.0</td>
<td>segfault</td>
<td>9.3</td>
<td>24.4</td>
<td>9.8</td>
<td>9.6</td>
<td>2.2</td>
<td>2.2</td>
<td>1.4</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<h1 id="mergesort-merge-sort-a-list-of-n-integers-n-2000000_1">mergesort: merge sort a list of N integers (N = 2’000’000)<a class="headerlink" href="#mergesort-merge-sort-a-list-of-n-integers-n-2000000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.40</td>
<td>0.31</td>
<td>3.55</td>
<td>1.32</td>
<td>22.45</td>
<td>2.86</td>
<td>2.90</td>
<td>1.95</td>
<td>3.52</td>
<td>0.15</td>
<td>0.15</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1973.7</td>
<td>720.4</td>
<td>5046.7</td>
<td>2729.8</td>
<td>1728.9</td>
<td>253.6</td>
<td>253.6</td>
<td>172.6</td>
<td>343.1</td>
<td>24.4</td>
<td>26.8</td>
</tr>
</tbody>
</table>
<h1 id="maybe-optionally-sum-n-non-zero-integers-from-a-binary-tree-k-times-n-220-k-100">maybe: optionally sum N non-zero integers from a binary tree K times (N = 2<sup>20</sup>, K = 100)<a class="headerlink" href="#maybe-optionally-sum-n-non-zero-integers-from-a-binary-tree-k-times-n-220-k-100" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.45</td>
<td>0.64</td>
<td>3.29</td>
<td>1.57</td>
<td>22.75</td>
<td>5.58</td>
<td>0.59</td>
<td>0.30</td>
<td>3.57</td>
<td>0.27</td>
<td>0.50</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1.6</td>
<td>3.8</td>
<td>2646.1</td>
<td>1320.9</td>
<td>22.4</td>
<td>5560.7</td>
<td>9.7</td>
<td>3.9</td>
<td>4.0</td>
<td>1.3</td>
<td>4.1</td>
</tr>
</tbody>
</table>
<h1 id="fold-fold-a-list-of-n-integers-k-times-n-100000-k-1000_1">fold: fold a list of N integers K times (N = 100’000, K = 1000)<a class="headerlink" href="#fold-fold-a-list-of-n-integers-k-times-n-100000-k-1000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.45</td>
<td>0.54</td>
<td>0.35</td>
<td>0.23</td>
<td>15.27</td>
<td>0.58</td>
<td>0.58</td>
<td>0.36</td>
<td>1.80</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>3.1</td>
<td>4.6</td>
<td>4.4</td>
<td>10.6</td>
<td>43.4</td>
<td>12.7</td>
<td>12.7</td>
<td>5.9</td>
<td>5.9</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody>
</table>
<h1 id="cps-compute-the-nth-fibonacci-number-modulo-228-with-cps-n-100000000_1">cps: compute the Nth Fibonacci number modulo 2<sup>28</sup> with CPS (N = 100’000’000)<a class="headerlink" href="#cps-compute-the-nth-fibonacci-number-modulo-228-with-cps-n-100000000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.43</td>
<td>0.52</td>
<td>1.56</td>
<td>stack overflow</td>
<td>20.22</td>
<td>10.04</td>
<td>0.39</td>
<td>0.35</td>
<td>1.60</td>
<td>0.16</td>
<td>0.25</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>1.5</td>
<td>3.9</td>
<td>1539.3</td>
<td>stack overflow</td>
<td>21.3</td>
<td>8067.7</td>
<td>9.7</td>
<td>1.7</td>
<td>1.8</td>
<td>1.3</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<h1 id="mapfold-map-and-fold-a-list-of-n-integers-k-times-n-10000-k-10000_1">mapfold: map and fold a list of N integers K times (N = 10000, K = 10000)<a class="headerlink" href="#mapfold-map-and-fold-a-list-of-n-integers-k-times-n-10000-k-10000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>1.01</td>
<td>1.59</td>
<td>2.74</td>
<td>1.81</td>
<td>38.24</td>
<td>1.29</td>
<td>2.42</td>
<td>1.43</td>
<td>4.22</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>2154.5</td>
<td>893.0</td>
<td>3059.1</td>
<td>1542.0</td>
<td>26.4</td>
<td>10.6</td>
<td>10.7</td>
<td>7.5</td>
<td>10-20</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody>
</table>
<h1 id="ackermann-compute-ack3-n-with-the-higher-order-ackermann-function-definition-n-11_1">ackermann: compute Ack(3, N) with the higher-order Ackermann function definition (N = 11)<a class="headerlink" href="#ackermann-compute-ack3-n-with-the-higher-order-ackermann-function-definition-n-11_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>New Juvix runtime (specialised, native)</th>
<th>New Juvix runtime (specialised, wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>0.92</td>
<td>1.21</td>
<td>0.30</td>
<td>0.65</td>
<td>segfault</td>
<td>runtime error</td>
<td>11.71</td>
<td>0.87</td>
<td>0.47</td>
<td>0.54</td>
<td>1.35</td>
<td>0.00</td>
<td>0.14</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>2.6</td>
<td>4.1</td>
<td>2.3</td>
<td>3.9</td>
<td>segfault</td>
<td>runtime error</td>
<td>23.3</td>
<td>13.6</td>
<td>9.6</td>
<td>2.0</td>
<td>3.6</td>
<td>1.3</td>
<td>4.0</td>
</tr>
</tbody>
</table>
<h1 id="mapfun-successively-map-k-functions-to-a-list-of-n-integers-k-100-n-10000_1">mapfun: successively map K functions to a list of N integers (K = 100, N = 10000)<a class="headerlink" href="#mapfun-successively-map-k-functions-to-a-list-of-n-integers-k-100-n-10000_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th></th>
<th>New Juvix runtime (native)</th>
<th>New Juvix runtime (wasm32, wasmer)</th>
<th>New Juvix runtime (specialised, native)</th>
<th>New Juvix runtime (specialised, wasm32, wasmer)</th>
<th>Current Juvix (native)</th>
<th>Current Juvix (wasm32, wasmer)</th>
<th>JuvixCore evaluator</th>
<th>Haskell (native, ghc -O2)</th>
<th>Haskell (native, ghc -XStrict -O2)</th>
<th>OCaml (native, ocamlopt -O2)</th>
<th>OCaml (bytecode)</th>
<th>C (native, clang -O3)</th>
<th>C (wasm32, clang -Os, wasmer)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time (seconds, real)</td>
<td>1.27</td>
<td>1.04</td>
<td>0.39</td>
<td>0.46</td>
<td>segfault</td>
<td>runtime error</td>
<td>4.18</td>
<td>1.85</td>
<td>0.95</td>
<td>0.19</td>
<td>0.68</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr>
<td>Memory use (MB, max RSS)</td>
<td>3209.8</td>
<td>1229.7</td>
<td>21.8</td>
<td>13.2</td>
<td>segfault</td>
<td>runtime error</td>
<td>33.0</td>
<td>13.6</td>
<td>11.6</td>
<td>5.3</td>
<td>7.9</td>
<td>NA</td>
<td>NA</td>
</tr>
</tbody>
</table>
<p>Comments</p>
<hr />
<h1 id="new-juvix-runtime-denotes-c-programs-written-using-the-primitives">"New Juvix runtime" denotes C programs written using the primitives<a class="headerlink" href="#new-juvix-runtime-denotes-c-programs-written-using-the-primitives" title="Permanent link">&para;</a></h1>
<p>of the new Juvix runtime. These programs were "manually" compiled from
the corresponding Juvix/JuvixCore programs, according to the new Juvix
compilation concept. They correspond closely to the code that will be
generated by the basic version of the new compilation process, without
any high-level optimisations (inlining, specialisation, fusion, constant
folding) but with basic low-level memory representation optimisations
(unboxing, untagging, etc). This version of the new compilation process
should be finished with the 0.4 milestone.</p>
<h1 id="the-specialised-column-for-new-juvix-runtime-denotes-a-version">The "specialised" column for "New Juvix runtime" denotes a version<a class="headerlink" href="#the-specialised-column-for-new-juvix-runtime-denotes-a-version" title="Permanent link">&para;</a></h1>
<p>of the corresponding "New Juvix runtime" benchmark program for which
specialisation of higher-order functions was manually performed (to
simulate the effects of the high-level specialisation optimisation).</p>
<h1 id="current-juvix-denotes-juvix-programs-compiled-with-the-current">"Current Juvix" denotes Juvix programs compiled with the current<a class="headerlink" href="#current-juvix-denotes-juvix-programs-compiled-with-the-current" title="Permanent link">&para;</a></h1>
<p>compilation process via a "direct" translation to C. For a fair
comparison, all number operations were implemented using native binary C
integers (exposed via `foreign` and `compile` blocks) without
overflow check, instead of using the unary Nat from the standard
library. For Haskell, we use the fixed-precision Int instead of the
arbitrary-precision Integer.</p>
<h1 id="for-the-simplest-benchmark-programs-without-heap-memory-allocation">For the simplest benchmark programs without heap memory allocation<a class="headerlink" href="#for-the-simplest-benchmark-programs-without-heap-memory-allocation" title="Permanent link">&para;</a></h1>
<p>(e.g. `fibonacci`, `combinations`), the performance of "Current
Juvix" is comparable to or better than that of "New Juvix runtime". This
is because `clang` managed to eliminate (tail) recursion and optimise
the code to essentially the same or better thing. The main problem with
the current "direct" transpilation to C approach is that it cannot scale
to reliably work for more complex programs. By "more complex" I mean
larger program size, more functions, more complex patterns of recursion
and/or the use of more functional programming features (including
functional data structures). I don't mean higher computational
complexity or more resource use.</p>
<h1 id="the-segfaults-and-runtime-errors-for-current-juvix-are">The segfaults and runtime errors for "Current Juvix" are<a class="headerlink" href="#the-segfaults-and-runtime-errors-for-current-juvix-are" title="Permanent link">&para;</a></h1>
<p>consequences of incorrectly generated code (current compilation of
partial application is not entirely correct) or stack overflows (when
`clang` didn't figure out how to eliminate tail recursion).</p>
<h1 id="the-comparison-with-current-juvix-is-not-entirely-fair-for">The comparison with "Current Juvix" is not entirely fair for<a class="headerlink" href="#the-comparison-with-current-juvix-is-not-entirely-fair-for" title="Permanent link">&para;</a></h1>
<p>benchmarks that test the manipulation and calling of closures (e.g.
`fold`). Current Juvix achieves good performance (when it doesn't
segfault) at the expense of correctness: partial application is not
compiled correctly and fixing this would require a fundamental change in
closure representation.</p>
<h1 id="the-comparison-with-haskell-and-ocaml-compilers-is-not-entirely">The comparison with Haskell and OCaml compilers is not entirely<a class="headerlink" href="#the-comparison-with-haskell-and-ocaml-compilers-is-not-entirely" title="Permanent link">&para;</a></h1>
<p>fair, because the new Juvix runtime does not perform garbage collection.
With the GC overhead, I would expect the Juvix runtime results for
native compilation of first-order programs to become a bit worse than
the native OCaml versions. The GC overhead is particularly noticeable
for the `mergesort` benchmark which creates many large intermediate
lists. The memory usage of the Juvix runtime is much higher on this
benchmark than the memory usage of OCaml or Haskell versions. The
relatively small time difference between the OCaml native and bytecode
versions of `mergesort` also indicates that GC accounts for a
significant part of the running time.</p>
<h1 id="another-small-overhead-will-be-introduced-by-bounds-checking-for">Another small overhead will be introduced by bounds checking for<a class="headerlink" href="#another-small-overhead-will-be-introduced-by-bounds-checking-for" title="Permanent link">&para;</a></h1>
<p>integer operations. Currently, the new Juvix runtime operates on unboxed
31-bit (or 63-bit) integers without checking for integer overflow.</p>
<h1 id="if-we-decide-to-default-to-transparent-arbitrary-precision-integers">If we decide to default to transparent arbitrary-precision integers,<a class="headerlink" href="#if-we-decide-to-default-to-transparent-arbitrary-precision-integers" title="Permanent link">&para;</a></h1>
<p>then another small overhead will be introduced by the need to check the
integer representation with each arithmetic operation.</p>
<h1 id="admittedly-the-programs-were-deliberately-written-in-a-way-to-make">Admittedly, the programs were deliberately written in a way to make<a class="headerlink" href="#admittedly-the-programs-were-deliberately-written-in-a-way-to-make" title="Permanent link">&para;</a></h1>
<p>high-level optimisations unnecessary, except specialisation for
higher-order functions (mostly in `ackermann` and `mapfun`). This
also explains the good performance of the OCaml native compiler which
doesn't do much high-level optimisation.</p>
<h1 id="in-the-current-juvix-and-ocaml-version-of-mergesort-to-avoid">In the "Current Juvix" and OCaml version of `mergesort`, to avoid<a class="headerlink" href="#in-the-current-juvix-and-ocaml-version-of-mergesort-to-avoid" title="Permanent link">&para;</a></h1>
<p>stack overflow the `merge` function was written tail-recursively with
accumulator reversal at the end. This is not necessary for the new Juvix
runtime, because the stack is dynamically extended when needed.</p>
<h1 id="as-evidenced-by-the-combinations-benchmark-for-non-tail-recursive">As evidenced by the `combinations` benchmark, for non-tail-recursive<a class="headerlink" href="#as-evidenced-by-the-combinations-benchmark-for-non-tail-recursive" title="Permanent link">&para;</a></h1>
<p>direct calls our code performs worse than the code which uses the C /
WebAssembly stack and function call mechanisms. However, in general it
is impossible to directly use the C / WebAssembly stack and call
mechanisms for a purely functional language. Since we dynamically
allocate the stack segments when needed, stack overflow is impossible.
This is convenient in an eager functional language. Otherwise, one needs
to rewrite all functions operating on large data to use tail recursion.
We pay for this convenience with a small overhead, which is the main
reason for poorer performance on `combinations` where stack
manipulation cost dominates.</p>
<h1 id="haskells-laziness-seems-to-introduce-more-overhead-than-i">Haskell's laziness seems to introduce more overhead than I<a class="headerlink" href="#haskells-laziness-seems-to-introduce-more-overhead-than-i" title="Permanent link">&para;</a></h1>
<p>expected. This would explain the comparatively better performance of the
native OCaml compiler. The problem is particularly stark when Haskell's
strictness analysis fails for some reason, as in the `fibonacci`
benchmark. The second "Haskell" column with the "-XStrict" flag for GHC
indicates the version of the benchmark compiled with strictness as the
default.</p>
<h1 id="the-c-versions-of-the-programs-were-written-to-take-advantage-of-cs">The C versions of the programs were written to take advantage of C's<a class="headerlink" href="#the-c-versions-of-the-programs-were-written-to-take-advantage-of-cs" title="Permanent link">&para;</a></h1>
<p>imperative features, e.g., using arrays instead of lists, loops instead
of recursion. No C versions are provided for some benchmarks designed to
test specifically functional language features.</p>
<h1 id="with-the-new-juvix-runtime-the-32-bit-webassembly-version-of">With the new Juvix runtime, the 32-bit WebAssembly version of<a class="headerlink" href="#with-the-new-juvix-runtime-the-32-bit-webassembly-version-of" title="Permanent link">&para;</a></h1>
<p>`mergesort` is faster than the 64-bit native version because it needs
roughly half as much memory (the word size is 4 bytes instead of 8). The
difference is even starker between the WebAssembly and native versions
of `mergesort` for "Current Juvix".</p>
<h1 id="there-seems-to-be-a-memory-leak-in-the-juvixcore-evaluator-this-is">There seems to be a memory leak in the JuvixCore evaluator. This is<a class="headerlink" href="#there-seems-to-be-a-memory-leak-in-the-juvixcore-evaluator-this-is" title="Permanent link">&para;</a></h1>
<p>what happens too often when one uses a lazy language.</p>
<h1 id="haskell-also-leaks-memory-in-the-fibonacci-benchmark-despite-it">Haskell also leaks memory in the Fibonacci benchmark, despite it<a class="headerlink" href="#haskell-also-leaks-memory-in-the-fibonacci-benchmark-despite-it" title="Permanent link">&para;</a></h1>
<p>being a simple tail-recursive program. It seems strictness analysis
didn't work.</p>

  
  



  




                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../lsp/" class="md-footer__link md-footer__link--prev" aria-label="Previous: LSP support" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                LSP support
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Made with :white_heart: 2022 - Heliax AG
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/anoma/juvix" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/juvixlang" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.path", "navigation.footer", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.6c7302c4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.803ed251.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>
      
        <script src="../../assets/js/highlight.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/highlightjs-juvix/dist/juvix.min.js"></script>
      
        <script src="../../assets/js/juvix-highlight.js"></script>
      
        <script src="../../assets/js/extra.js"></script>
      
    
  </body>
</html>